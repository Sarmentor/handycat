<div ng-controller="TabsCtrl">
    <cat-nav></cat-nav>
    <!-- This hr uses some space vertical space so the nav-bar do not hide part of the first segment -->
    <hr>

    <!-- translation area -->
    <div class="edit-area-wrapper" ng-controller="ContentAreaCtrl" ng-show="tabs[0].active">
        <!-- repeat for each segment -->
        <div class="segment row" ng-class="{ pending: !segmentState.completed, completed: segmentState.completed}" ng-controller="SegmentAreaCtrl" end-repeat ng-repeat="seg in segments"
             ng-init="segment = seg; init($index); segmentNumber = $index; id.index = $index;">
            <a id="segment-{{$index}}"></a>
            <p class="segment-index-label">Segment Index: {{$index}}
                <span class="segment-finished" ng-show="segmentState.completed">
                    <button type="button" class="btn btn-default btn-xs">
                        <span class="glyphicon glyphicon-ok"></span> Complete
                    </button>
                </span>
                <span class="segment-finished" ng-hide="segmentState.completed">
                   <button type="button" class="btn btn-default btn-xs">
                       <span class="glyphicon glyphicon-flag"></span> Pending
                   </button>
                </span>
            </p>

            <div class="bottom-margin" ng-click="activate($index)">
                <div class="row">
                    <div class="col-sm-6 bottom-margin">
                        <div class="row">
                            <div class="col-xs-11">
                                <div ng-show="segmentState.completed" class="ace_editor target segment-finished-target frame" ng-click="reopen($index)">
                                    <p>{{segment.source}}</p>
                                </div>
                                <div ng-hide="segmentState.completed" class="content-card frame">
                                    <div class="source">
                                        <source-area ng-init="setSource(segment.source)" source-sentence="segment.source"></source-area>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- working - prototyping dynamic addition of the Ace Editor -->
                    <div class="col-sm-6 bottom-margin">
                        <div class="row">
                            <div class="col-xs-11">
                                <static-target text="{{segment.target}}"></static-target>
                            </div>
                        </div>
                    </div>
                <hr/>
            </div>
        </div>
    </div>

    <div ng-show="checkTranslationCompleted()" id="footmsg">
        <h2>Translation Job completed!</h2>
    </div>

    <!--
    <div ng-controller="StatsController">
        <p>Stats</p>
        <div ng-repeat="s in log">
            <p>{{s[3]}}: {{s[0]}} {{s[1]}} {{s[2]}}</p>
        </div>
    </div> -->
</div>