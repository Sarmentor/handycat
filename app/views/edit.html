  <!-- TODO: show the relevant content when the tab is active - put inside tab.content? -->
<div class="container" ng-controller="TabsCtrl">
    <div>
      <tabset justified="true">
        <tab ng-repeat="tab in tabs" heading="{{tab.title}}" active="tab.active" disabled="tab.disabled"></tab>
      </tabset>
    </div>

    <!-- TODO: add feature where dragging a word or phrase to target area translates it automatically -->
    <!-- UPDATE: use glossary for the 'add word' feature -->
    <!-- TODO: markup target content using highlight rules -->
    <!-- TODO: get the TM matches for the source segment -->

    <!-- translation area -->
    <div class="container edit-area-wrapper" ng-controller="ContentAreaCtrl" ng-show="tabs[0].active">
        <div class="segment row" ng-controller="SegmentAreaCtrl" ng-repeat="seg in segments">
            <a id="segment-{{$index}}"></a>
            <p>Segment Index: {{$index}}</p>
            <!-- TODO - WORKING: move the AceCtrl only to the Ace edit area, and nest controllers within the translation unit -->
            <div class="row" ng-controller="AceCtrl">
                <!-- used with $anchorScroll from ContentAreaCtrl -->
                <!-- TODO: prevent $anchorScroll from reloading the ng-repeat -->

                <div class="content-card source-area col-sm-6">
                    <div class="source">{{ allSegments[$index][0] }}</div>
                </div>
                <div ng-init="setSegments(index)" index="{{$index}}" class="content-card target-area col-sm-6">
                    <div class="edit-area">
                        <!-- the ace editor -->
                        <div class="ace_editor target" id="ace_editor-{{$index}}" ng-model="allSegments[$index][1]" ui-ace="{ onLoad : aceLoaded }"></div>

                        <!-- The tools for editing -->

                        <!-- the other possible wordforms for the selected word -->
                        <div class="ace-toolbar" ng-show="toolbarOpen">
                            <div
                                class="translation-toolbar"
                            >
                                <div class="row">
                                    <span class="col-xs-3 btn btn-default glyphicon glyphicon-search" ng-click="queryConcordancer(concordanceQuery)"></span>
                                    <span class="col-xs-3 btn btn-default glyphicon glyphicon-book" ng-click="queryGlossary(glossaryQuery)"></span>
                                    <span class="col-xs-3 btn btn-default glyphicon glyphicon-list-alt"></span>
                                    <span class="col-xs-3"></span>
                                </div>
                                <h3>glossary matches</h3>
                                <input type="text" ng-model="glossaryQuery" placeholder="Enter a search query..." />
                                <div ng-repeat="glossaryMatch in glossaryMatches">{{glossaryMatch}}</div>

                                <h3>concordance matches</h3>
                                <input type="text" ng-model="concordanceQuery" placeholder="Enter a search query..." />
                                <div ng-repeat="concordanceMatch in concordanceMatches" ng-bind-html="getSnippet({{concordanceMatch}})"></div>

                            </div>
                            <div class="word-forms">
                                <p>Word forms of the clicked token</p>
                                <div class="row">
                                    <div
                                        class="pull-left"
                                        ng-repeat="word in otherWordForms"
                                    >
                                        <button class="btn btn-default" ng-click="replaceSelection(word)">{{word}}</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div chars class="sample-show-hide" show="{{showSpecialChars}}" special="germanChars" selected="insertChar(char)" ></div>
                        <div class="row">
                            <button ng-click="segmentFinished()" class="seg-finished btn btn-primary pull-right"><span class="glyphicon glyphicon-ok-sign cat-glyph"></span></button>
                            <!--<button ng-click="showSpecialChars = !showSpecialChars" class="btn btn-primary pull-right"><span>Show special</span></button>-->
                        </div>
                    </div>
                </div>
            </div>
        <hr/>
        </div>
    </div>
</div>
